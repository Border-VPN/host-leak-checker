# Host Leak Checker

–°–∫—Ä–∏–ø—Ç `check_leaks.py` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–ø–∏—Å–æ–∫ —Ö–æ—Å—Ç–æ–≤ (–∏—â–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è) —Ü–µ–ª–µ–≤–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç —É—Ç–µ—á–µ–∫ (`host:port`) –≤ –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ø–∏—Å–∫–∞—Ö.

üîß –ß—Ç–æ –µ—Å—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:

- `check_leaks.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç,
- `scripts/install_and_run.sh` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π bash-—Å–∫—Ä–∏–ø—Ç,
- `.github/workflows/check-leaks.yml` ‚Äî workflow, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —á–∞—Å,
- `requirements.txt` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏,
- `list.txt` ‚Äî –≤–∞—à —Ñ–∞–π–ª —Å–æ —Å–ø–∏—Å–∫–æ–º –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫/—Ö–æ—Å—Ç–æ–≤ (–Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è).

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç `scripts/install_and_run.sh`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- –∫–ª–æ–Ω–∏—Ä—É–µ—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ `/opt/host-leak-checker`,
- –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ `python3` –∏ `python3-venv` (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤ —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏),
- —Å–æ–∑–¥–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `.venv` –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏,
- –ø–æ–ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç `check_leaks.py`.

```bash
bash <(curl -Ls https://raw.githubusercontent.com/Border-VPN/host-leak-checker/main/scripts/install_and_run.sh)
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- –¢—Ä–µ–±—É—é—Ç—Å—è `bash`, `sudo`, `curl` (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å `wget`: `bash <(wget -qO- <URL>)`), `python`.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `/opt/`, –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é

   ```bash
   cd /opt &&
   git clone https://github.com/Border-VPN/host-leak-checker.git &&
   cd host-leak-checker
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

   ```bash
   pip install -r requirements.txt
   ```

3. –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ –∏–Ω—Å—Ç–∞–ª–ª—è—Ç–æ—Ä–∞)

   –õ–æ–∫–∞–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ URL –ø–æ–¥–ø–∏—Å–∫–∏ –∏ —Ñ–∞–π–ª —Å–ø–∏—Å–∫–∞ –∫–∞–∫ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã:

   ```bash
   python check_leaks.py "<SUB_URL>" list.txt
   ```

## CI

- –í CI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤) –∑–∞–¥–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç `SUBSCRIPTION_URL` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (Settings ‚Üí Secrets).
  Workflow –ø–µ—Ä–µ–¥–∞—Å—Ç –µ–≥–æ –∫–∞–∫ –ø–µ—Ä–≤—ã–π –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç.
- Workflow –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `secrets.SUBSCRIPTION_URL` –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç `python check_leaks.py "$SUBSCRIPTION_URL" list.txt --create-issue`

## –û—Ç—á–µ—Ç—ã

- `leak_report.json` ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–π JSON.
- `leak_report.md` ‚Äî Markdown –æ—Ç—á–µ—Ç.

## –í–∫–ª—é—á–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è issues –≤ GitHub Actions

–ï—Å–ª–∏ –í—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–ª issue –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —É—Ç–µ—á–µ–∫, —Ç–æ —É–∫–∞–∂–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `GITHUB_TOKEN` (–æ–±—ã—á–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–æ—Ç-—Ç–æ–∫–µ–Ω —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏, –¥–æ–±–∞–≤—å—Ç–µ `secrets.REPO_TOKEN` –∏ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –µ–≥–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `GITHUB_TOKEN` —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Actions.

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- `list.txt` –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª–∏–±–æ –≥–æ—Ç–æ–≤—ã–µ `host:port` —Å—Ç—Ä–æ–∫–∏, –ª–∏–±–æ —Å–ø–∏—Å–æ–∫ URL-–∞–¥—Ä–µ—Å–æ–≤ –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏. –í –ø–æ—Å–ª–µ–¥–Ω–µ–º —Å–ª—É—á–∞–µ —Å–∫—Ä–∏–ø—Ç –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ.
- –°–∫—Ä–∏–ø—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–Ω—É–ª–µ–≤–æ–π –∫–æ–¥ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ç–µ–≤–æ–π —Å–±–æ–π). –ù–∞–ª–∏—á–∏–µ —É—Ç–µ—á–µ–∫ —Å–∞–º–æ –ø–æ —Å–µ–±–µ ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –∏ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ —É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.
